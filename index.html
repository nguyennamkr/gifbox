<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ğŸ’Œ Báº¥t Ngá» Cho Em ğŸ’</title><style> /* --- CSS HOÃ€N CHá»ˆNH & RESPONSIVE --- */ /* --- CSS Chung --- */ body { background-color: #f7f0ff; font-family: 'Arial', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; perspective: 1000px; background-image: radial-gradient(#ffe6f2 1px, transparent 0); background-size: 20px 20px; } #magicCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; opacity: 0.5; } #mainContainer { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; z-index: 100; } /* --- PHáº¦N MÃ€N HÃŒNH NHáº¬P PIN --- */ #pinScreen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: #f7f0ff; z-index: 1000; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.5s; } #pinScreen.hidden { opacity: 0; pointer-events: none; } #pinDisplay { font-family: monospace; font-size: 2.5em; letter-spacing: 10px; border-bottom: 3px solid #FFC0CB; padding: 10px; min-width: 280px; text-align: center; color: #333; margin-bottom: 30px; user-select: none; } #pinMessage { color: #FF4D4D; height: 20px; margin-bottom: 10px; font-weight: bold; } #keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; width: 300px; } @keyframes shake { 0% { transform: translateX(0); } 20% { transform: translateX(-10px); } 40% { transform: translateX(10px); } 60% { transform: translateX(-8px); } 80% { transform: translateX(8px); } 100% { transform: translateX(0); } } .pin-button { background-color: #fff; border: 2px solid #FFC0CB; color: #FF69B4; font-size: 1.5em; font-weight: bold; padding: 15px 0; border-radius: 10px; cursor: pointer; transition: background-color 0.1s, transform 0.1s; box-shadow: 0 4px #FFC0CB; } .pin-button:active { background-color: #FFC0CB; color: #fff; transform: translateY(4px); box-shadow: 0 0 #FFC0CB; } .action-btn { background-color: #eee; color: #666; box-shadow: 0 4px #ccc; } .action-btn:active { background-color: #ccc; color: #333; box-shadow: 0 0 #ccc; } /* --- NÃºt Báº­t/Táº¯t Ã‚m Thanh --- */ #soundToggle { position: fixed; top: 15px; right: 15px; font-size: 24px; cursor: pointer; color: #FF69B4; z-index: 300; transition: color 0.3s, transform 0.2s; } #soundToggle:hover { color: #FFC0CB; transform: scale(1.1) rotate(5deg); } /* --- TrÃ¡i Tim Má»Ÿ Äáº§u --- */ .heart-wrapper { position: absolute; z-index: 200; display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; transition: opacity 0.3s ease-out, transform 0.3s ease-out; opacity: 0; pointer-events: none; transform-style: preserve-3d; } .heart-wrapper.active { opacity: 1; pointer-events: all; } /* TrÃ¡i tim CSS */ .css-heart { position: relative; width: 150px; height: 150px; background-color: #ff4d4d; animation: pulse-heart 1s infinite ease-in-out; transform: rotate(-45deg); box-shadow: 0 10px 30px rgba(255, 77, 77, 0.7), -5px 5px 20px rgba(255, 105, 180, 0.5); cursor: pointer; transition: box-shadow 0.2s; transform-origin: center center; } .css-heart::before, .css-heart::after { content: ""; position: absolute; width: 150px; height: 150px; border-radius: 50%; background-color: #ff4d4d; transform-origin: 50% 50%; } .css-heart::before { top: -75px; left: 0; } .css-heart::after { left: 75px; top: 0; } /* Keyframes cho Nhá»‹p Ä‘áº­p RÃ• RÃ€NG */ @keyframes pulse-heart { 0% { transform: scale(0.9) rotate(-45deg); filter: brightness(1); } 50% { transform: scale(1.2) rotate(-45deg); filter: brightness(1.2); } 100% { transform: scale(0.9) rotate(-45deg); filter: brightness(1); } } /* Khi trÃ¡i tim biáº¿n máº¥t */ .heart-wrapper.hidden { opacity: 0; transform: scale(0.5) translateY(-50px); pointer-events: none; animation: none !important; } .heart-wrapper.invisible { display: none; } /* Vá» thÆ° */ .envelope-wrapper { position: relative; width: 350px; height: 220px; cursor: pointer; z-index: 210; transition: transform 0.8s, opacity 0.8s, box-shadow 0.5s; box-shadow: 0 10px 50px rgba(255, 105, 180, 0.7); transform: scale(0.95); overflow: hidden; border-radius: 5px; opacity: 0; pointer-events: none; perspective: 1000px; } .envelope-wrapper.active { pointer-events: all; } /* BÃŒ THÆ¯: NHá»ŠP Äáº¬P KHI HIá»†N RA */ .envelope-wrapper.visible { opacity: 1; animation: pulse-envelope 2s infinite ease-in-out; } @keyframes pulse-envelope { 0% { transform: scale(0.95); } 50% { transform: scale(1.02); } 100% { transform: scale(0.95); } } /* Náº¯p bÃ¬ thÆ° */ .flap { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #FFC0CB; border-radius: 5px; z-index: 50; transform-origin: top; transition: transform 0.8s ease-in-out; clip-path: polygon(0 0, 100% 0, 50% 50%, 0 0); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); } .envelope { width: 100%; height: 100%; background-color: #fce4ec; border-radius: 5px; position: absolute; z-index: 40; } .envelope-wrapper.open .flap { transform: rotateX(180deg); z-index: 30; } /* --- Ná»™i Dung Thiá»‡p --- */ .letter { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #fff; padding: 20px; box-sizing: border-box; border-radius: 10px; opacity: 0; pointer-events: none; z-index: 45; transition: all 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Strong Bounce Curve */ box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); background-image: radial-gradient(circle at 10% 20%, rgba(255,229,165,0.8) 0%, rgba(250,190,123,0.8) 90%), url('data:image/svg+xml,%3Csvg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23fce4ec" fill-opacity="0.5"%3E%3Cpath d="M25 18a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H23a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm10 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm-20 10a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM35 28a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM15 38a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H13a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm20 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM25 48a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H23a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm10 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM5 58a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm10 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H13a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM35 58a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM25 68a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H23a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm10 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM15 78a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H13a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm20 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM5 88a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm25 8a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm-10 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H23a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zm30-90a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H53a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM65 8a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H63a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM55 18a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H53a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM85 18a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM65 28a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H63a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM95 28a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H93a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM55 38a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H53a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM85 38a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM75 48a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H73a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM95 48a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H93a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM65 58a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H63a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM85 58a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM55 68a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H53a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM75 68a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H73a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM95 68a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H93a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM65 78a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H63a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM95 78a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H93a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM55 88a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H53a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM85 88a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2zM75 98a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H73a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2z" /%3E%3C/g%3E%3C/svg%3E'); background-size: cover, 50px 50px; transform-origin: center center; transform-style: preserve-3d; } /* Tráº¡ng thÃ¡i ban Ä‘áº§u cá»§a thiá»‡p khi Ä‘Æ°á»£c kÃ©o ra khá»i phong bÃ¬ */ .envelope-wrapper.open .letter { transform: translateY(-20px) scale(0.5) rotateX(10deg); opacity: 1; transition: opacity 0.5s ease-out, transform 0.8s ease-out; } /* --- TRáº NG THÃI Má» (HIá»†U á»¨NG POP-OUT Cá»°C Máº NH) --- */ .letter.opened { position: fixed; opacity: 1; pointer-events: all; z-index: 999; width: auto; height: auto; min-width: 300px; min-height: 400px; max-width: 500px; max-height: 600px; top: 50%; left: 50%; /* Giai Ä‘oáº¡n 1: BUNG RA Máº NH Máº¼ */ transform: translate(-50%, -50%) scale(1.3) rotateX(15deg) rotateY(10deg) rotateZ(-5deg) translateZ(200px); transition: all 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Strong Bounce Curve */ border: 5px solid #FF69B4; box-shadow: 0 0 50px rgba(255, 105, 180, 0.9); border-radius: 10px; padding: 25px; } /* Giai Ä‘oáº¡n 2: TRá» Vá»€ TRáº NG THÃI CUá»I (á»”n Ä‘á»‹nh sau khi náº£y) */ .letter.opened.final-scale { transform: translate(-50%, -50%) scale(1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateZ(0); transition: all 0.3s ease-out; } /* Lá»›p áº©n vá» thÆ° hoÃ n toÃ n */ .envelope-wrapper.hidden { opacity: 0; pointer-events: none; transform: scale(0); animation: none !important; } /* --- MEDIA QUERY --- */ @media (max-width: 600px) { .envelope-wrapper { width: 300px; height: 180px; perspective: 800px; } .letter.opened { width: 80vw; height: 70vh; max-width: 90vw; max-height: 90vh; padding: 15px; } .css-heart { width: 120px; height: 120px; } .css-heart::before, .css-heart::after { width: 120px; height: 120px; } .css-heart::before { top: -60px; left: 0; } .css-heart::after { left: 60px; top: 0; } #keypad { width: 250px; gap: 10px; } } /* --- CÄ‚N CHá»® VÃ€O GIá»®A THIá»†P --- */ .letter-content { display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-y: hidden; text-align: center; color: #333; font-size: 1.1em; line-height: 1.6; width: 100%; height: 100%; box-sizing: border-box; padding: 0; } .letter-content > * { max-width: 100%; margin: 5px 0; } .letter-content h2 { color: #FF69B4; margin-top: 0; font-size: 1.8em; text-shadow: 1px 1px 2px rgba(255, 192, 203, 0.5); } .letter-content.typing-active p { opacity: 0; } .letter-content.typing-active h2 { opacity: 0; } .status-message { position: absolute; bottom: -50px; color: #ffc0cb; font-style: italic; font-size: 0.9em; width: 100%; text-align: center; animation: pulse 2s infinite; z-index: 10; } @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } } /* --- CSS CHO CONFETTI --- */ .confetti { position: fixed; top: -10px; left: 0; width: 10px; height: 10px; border-radius: 50%; pointer-events: none; opacity: 0; z-index: 1000; } .confetti.heart { background-color: transparent; width: 12px; height: 12px; transform: rotate(-45deg); } .confetti.heart::before, .confetti.heart::after { content: ""; position: absolute; width: 12px; height: 12px; border-radius: 50%; background-color: inherit; } .confetti.heart::before { top: -6px; left: 0; } .confetti.heart::after { left: 6px; top: 0; } @keyframes fall { to { transform: translate3d(var(--x), var(--y), 0) rotate(var(--r)); opacity: 0; } } /* ======================================= */ /* --- BÃ NGÃ” HALLOWEEN VÃ€ MODAL Sá»¢ HÃƒI --- */ /* ======================================= */ /* BÃ­ NgÃ´ CSS */ #pumpkin { position: fixed; top: 20px; left: 20px; width: 60px; height: 60px; background-color: #ff7518; /* MÃ u cam bÃ­ ngÃ´ */ border-radius: 50%; cursor: pointer; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5), 0 0 15px rgba(255, 117, 24, 0.7); z-index: 500; /* Cao hÆ¡n má»i thá»© trá»« Modal */ transition: transform 0.2s; animation: breathe-pumpkin 3s infinite ease-in-out; border: 2px solid #550000; } #pumpkin:hover { transform: scale(1.1) rotate(-5deg); } /* Cuá»‘ng bÃ­ ngÃ´ */ #pumpkin::before { content: ""; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: #228b22; /* Xanh lÃ¡ cÃ¢y */ border-radius: 3px; } /* Máº¯t & Miá»‡ng (ÄÃ¡ng yÃªu & ÄÃ¡ng sá»£) */ #pumpkin::after { content: "ğŸ‘»"; /* Icon thay tháº¿ cho khuÃ´n máº·t phá»©c táº¡p */ position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 30px; line-height: 1; text-shadow: 1px 1px 2px black; } @keyframes breathe-pumpkin { 0%, 100% { transform: scale(1) rotate(0); } 50% { transform: scale(1.05) rotate(2deg); } } /* Modal ÄÃ¡ng Sá»£ */ #scareModal { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); /* Ná»n tá»‘i má» */ z-index: 5000; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.5s; } #scareModal.active { display: flex; opacity: 1; } .modal-content { background-color: #330000; /* Ná»n Ä‘á» Ä‘áº­m, ma má»‹ */ border: 5px solid #FF4500; /* Viá»n cam rá»±c */ border-radius: 15px; padding: 40px; max-width: 400px; text-align: center; box-shadow: 0 0 50px rgba(255, 69, 0, 0.9); transform: scale(0.8); animation: modal-pop-in 0.4s forwards; } @keyframes modal-pop-in { to { transform: scale(1); } } .modal-content h2 { color: #FFD700; /* VÃ ng kim loáº¡i */ font-size: 2.2em; text-shadow: 2px 2px #FF4500; margin-bottom: 20px; animation: text-flicker 1.5s infinite alternate; } .modal-content p { color: #fff; font-size: 1.1em; margin-bottom: 30px; font-style: italic; } @keyframes text-flicker { 0% { opacity: 1; text-shadow: 2px 2px #FF4500; } 50% { opacity: 0.8; text-shadow: none; } 100% { opacity: 1; text-shadow: 2px 2px #FF4500; } } .love-button { background-color: #FF4D4D; /* Äá» tÃ¬nh yÃªu */ color: #fff; border: none; padding: 12px 30px; font-size: 1.2em; font-weight: bold; border-radius: 50px; cursor: pointer; box-shadow: 0 5px #CC0000; transition: all 0.1s; } .love-button:active { transform: translateY(5px); box-shadow: 0 0 #CC0000; } </style></head><body><canvas id="magicCanvas"></canvas><div id="soundToggle">ğŸ”‡</div><audio id="bgm" loop><source src="halloween_music.mp3" type="audio/mpeg" /></audio><audio id="scarySound"><source src="scary_scream.mp3" type="audio/mpeg" /></audio><audio id="pin_0_sound"><source src="pin_0.mp3" type="audio/mpeg" /></audio><audio id="pin_1_sound"><source src="pin_1.mp3" type="audio/mpeg" /></audio><audio id="pin_2_sound"><source src="pin_2.mp3" type="audio/mpeg" /></audio><audio id="pin_3_sound"><source src="pin_3.mp3" type="audio/mpeg" /></audio><audio id="pin_4_sound"><source src="pin_4.mp3" type="audio/mpeg" /></audio><audio id="pin_5_sound"><source src="pin_5.mp3" type="audio/mpeg" /></audio><audio id="pin_6_sound"><source src="pin_6.mp3" type="audio/mpeg" /></audio><audio id="pin_7_sound"><source src="pin_7.mp3" type="audio/mpeg" /></audio><audio id="pin_8_sound"><source src="pin_8.mp3" type="audio/mpeg" /></audio><audio id="pin_9_sound"><source src="pin_9.mp3" type="audio/mpeg" /></audio><audio id="pinClickSound"><source src="pin_click.mp3" type="audio/mpeg" /></audio><audio id="envelopeOpenSound"><source src="envelope_open.mp3" type="audio/mpeg" /></audio><audio id="typewriterStartSound"><source src="typewriter_start.mp3" type="audio/mpeg" /></audio><div id="pumpkin"></div><div id="scareModal"><div class="modal-content"><h2>HALLOWEEN áº¢NH HÆ¯á»NG TÃ TEO!</h2><p>Em dÃ¡m nhÃ¬n tháº³ng vÃ o Ä‘Ã´i máº¯t nÃ y sao? ğŸ˜ˆ HÃ£y nhá»› ráº±ng dÃ¹ Ä‘Ã¡ng sá»£ Ä‘áº¿n máº¥y, thÃ¬ Anh váº«n sáº½ cháº¡y vá» hÆ°á»›ng Ä‘Ã³, hÆ°á»›ng nÃ o Ã¡? Äá»‘ Em biáº¿t ğŸ¥° </p><button class="love-button" onclick="hideScaryModal()">CÆ¯á»œI Má»ˆM trÆ°á»›c khi Báº¤M â¤ï¸</button></div></div><div id="pinScreen"><h2 style="color: #FF69B4; margin-bottom: 30px;">Vá»«ng Æ i Má»Ÿ Cá»­a ğŸ”’</h2><div id="pinDisplay">_ _ _ _</div><div id="pinMessage"></div><div id="keypad"><button class="pin-button">1</button><button class="pin-button">2</button><button class="pin-button">3</button><button class="pin-button">4</button><button class="pin-button">5</button><button class="pin-button">6</button><button class="pin-button">7</button><button class="pin-button">8</button><button class="pin-button">9</button><button class="pin-button action-btn" data-action="delete">âŒ«</button><button class="pin-button">0</button><button class="pin-button action-btn" data-action="enter">OK</button></div></div><div id="mainContainer"><div class="heart-wrapper" id="heartWrapper"><div class="css-heart" id="initialHeart"></div></div><div class="envelope-wrapper" id="envelopeWrapper"><div class="flap"></div><div class="envelope"></div><div class="letter" id="letter"><div class="letter-content" id="letterContent"></div></div><p class="status-message" id="statusMessage"> Cháº¡m vÃ o trÃ¡i tim Ä‘á»ƒ báº¯t Ä‘áº§u... </p></div></div><script> // --- 0. Ã‚M THANH Ná»˜I Bá»˜ --- const pinClickSound = document.getElementById('pinClickSound'); const envelopeOpenSound = document.getElementById('envelopeOpenSound'); const typewriterStartSound = document.getElementById('typewriterStartSound'); const scarySound = document.getElementById('scarySound'); // Ã‚m thanh má»›i // Khai bÃ¡o Audio Element cho tá»«ng phÃ­m sá»‘ (0-9) const pinSounds = {}; for (let i = 0; i <= 9; i++) { pinSounds[i.toString()] = document.getElementById(`pin_${i}_sound`); } function playSound(audioElement, volume = 1.0) { if (!isMuted) { audioElement.currentTime = 0; audioElement.volume = volume; audioElement.play().catch(error => console.log("Lá»—i phÃ¡t Ã¢m thanh hiá»‡u á»©ng:", error)); } } // --- 1. Canvas Effect (Giá»¯ nguyÃªn) --- const canvas = document.getElementById('magicCanvas'); const ctx = canvas.getContext('2d'); let width = window.innerWidth; let height = window.innerHeight; canvas.width = width; canvas.height = height; let particles = []; const particleCount = 120; class Particle { constructor() { this.reset(); } reset() { this.x = Math.random() * width; this.y = Math.random() * height; this.size = Math.random() * 2 + 1; this.speedX = Math.random() * 0.1; this.speedY = Math.random() * 1.5 + 1; this.opacity = Math.random() * 0.7 + 0.5; this.color = Math.random() > 0.5 ? 'rgba(255, 105, 180, ' : 'rgba(199, 21, 133, '; } draw() { ctx.fillStyle = this.color + this.opacity + ')'; ctx.beginPath(); const s = this.size; const x = this.x; const y = this.y; ctx.moveTo(x, y + s / 4); ctx.quadraticCurveTo(x + s, y - s, x + s, y); ctx.quadraticCurveTo(x + s, y + s, x, y + 2 * s); ctx.quadraticCurveTo(x - s, y + s, x - s, y); ctx.quadraticCurveTo(x - s, y - s, x, y + s / 4); ctx.fill(); } update() { this.x += this.speedX; this.y += this.speedY; if (this.y > height) { this.reset(); this.y = 0; } } } function initCanvas() { for (let i = 0; i < particleCount; i++) { particles.push(new Particle()); } } function animateCanvas() { ctx.fillStyle = 'rgba(247, 240, 255, 0.1)'; ctx.fillRect(0, 0, width, height); particles.forEach(p => { p.update(); p.draw(); }); requestAnimationFrame(animateCanvas); } window.addEventListener('resize', () => { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; particles = []; initCanvas(); }); initCanvas(); animateCanvas(); // --- 2. Logic Ã‚m Thanh --- const bgm = document.getElementById('bgm'); const soundToggle = document.getElementById('soundToggle'); let isMuted = true; let bgmUserInitiated = false; soundToggle.addEventListener('click', toggleSound); function toggleSound() { if (isMuted) { bgm.muted = false; bgm.play().catch(error => { console.error("Lá»—i phÃ¡t nháº¡c:", error); }); soundToggle.textContent = 'ğŸ”Š'; isMuted = false; bgmUserInitiated = true; } else { bgm.pause(); bgm.currentTime = 0; soundToggle.textContent = 'ğŸ”‡'; isMuted = true; bgmUserInitiated = false; } } function handleVisibilityChange() { if (document.hidden) { if (!bgm.paused && !isMuted) { bgm.pause(); } } else { if (bgmUserInitiated && !isMuted) { bgm.play().catch(error => console.log("Lá»—i tá»± Ä‘á»™ng phÃ¡t nháº¡c sau khi chuyá»ƒn tab:", error)); } } } document.addEventListener("visibilitychange", handleVisibilityChange); // --- 3. Hiá»‡u á»©ng Chá»¯ Äá»™ng (Giá»¯ nguyÃªn) --- function applyTypewriterEffect(contentElement, delay = 500) { setTimeout(() => { const elements = contentElement.querySelectorAll('h2, p'); contentElement.classList.add('typing-active'); playSound(typewriterStartSound, 0.5); let totalDelay = 0; elements.forEach((el) => { const text = el.innerHTML; el.innerHTML = ''; el.style.opacity = '1'; setTimeout(() => { let i = 0; const speed = 25; function type() { if (i < text.length) { el.innerHTML += text.charAt(i); i++; setTimeout(type, speed); } } type(); }, totalDelay); totalDelay += (text.length * 25) + 300; }); }, delay); } // --- 4. Logic Nháº­p PIN --- const CORRECT_PIN = "2929"; const MAX_PIN_LENGTH = 4; const SUCCESS_MESSAGE_DELAY = 1000; const pinScreen = document.getElementById('pinScreen'); const pinDisplay = document.getElementById('pinDisplay'); const pinMessage = document.getElementById('pinMessage'); const keypad = document.getElementById('keypad'); let currentPin = ""; function updatePinDisplay() { let maskedPin = currentPin.padEnd(MAX_PIN_LENGTH, '_'); pinDisplay.textContent = maskedPin.split('').join(' '); } function handleKeyPress(key) { pinMessage.textContent = ""; if (key === 'delete') { playSound(pinClickSound, 0.5); currentPin = currentPin.slice(0, -1); } else if (key === 'enter') { playSound(pinClickSound, 0.8); checkPin(); return; } else if (currentPin.length < MAX_PIN_LENGTH) { // DÃ¹ng Ã¢m thanh riÃªng cho tá»«ng chá»¯ sá»‘ if (pinSounds[key]) { playSound(pinSounds[key], 0.3); } else { playSound(pinClickSound, 0.3); } currentPin += key; } updatePinDisplay(); if (currentPin.length === MAX_PIN_LENGTH) { setTimeout(checkPin, 300); } } function checkPin() { if (currentPin.length !== MAX_PIN_LENGTH) { pinMessage.textContent = "4 chá»¯ sá»‘ mÃ  nÃ ng thÆ¡ Æ¡iiii"; return; } if (currentPin === CORRECT_PIN) { pinMessage.textContent = "Xin Má»i Em VÃ o â¤ï¸ A"; setTimeout(() => { pinScreen.classList.add('hidden'); setTimeout(showHeart, 500); }, SUCCESS_MESSAGE_DELAY); } else { pinMessage.textContent = "Æ , Sai Rá»“i Ã€ ğŸ’”"; currentPin = ""; updatePinDisplay(); keypad.style.animation = 'shake 0.5s'; setTimeout(() => { keypad.style.animation = 'none'; }, 500); } } keypad.addEventListener('click', (event) => { if (event.target.classList.contains('pin-button')) { const value = event.target.textContent; const action = event.target.dataset.action; if (action) { handleKeyPress(action); } else if (!isNaN(parseInt(value))) { handleKeyPress(value); } } }); // --- 5. Logic Má»Ÿ ThÆ° --- const heartWrapper = document.getElementById('heartWrapper'); const envelopeWrapper = document.getElementById('envelopeWrapper'); const letter = document.getElementById('letter'); const letterContent = document.getElementById('letterContent'); const statusMessage = document.getElementById('statusMessage'); const flapDuration = 800; const heartTransitionDuration = 300; const initialHeart = document.getElementById('initialHeart'); // ThÃªm tham chiáº¿u const firstTimeContent = ` <h2 style="color: #FF69B4;">ğŸ’– DÃ nh Cho Em ğŸ’Œ</h2><p style="margin-top: 10px;">ChÃ o Em BÃ© Nh (â‰§â—¡â‰¦) ğŸ¥°</p><p>Anh muá»‘n gá»­i má»™t chÃºt náº¯ng áº¥m vÃ  tháº­t nhiá»u chÃ¢n thÃ nh qua chiáº¿c thiá»‡p nhá» nÃ y. Cáº£m Æ¡n vÃ¬ Ä‘Ã£ nÃ³i chuyá»‡n vá»›i Anh; hy vá»ng sau nÃ y, sau nÃ y vÃ  sau nÃ y ná»¯a sáº½ Ä‘Æ°á»£c Ä‘á»“ng hÃ nh nhiá»u hÆ¡n cÃ¹ng Em.</p><p>ğŸ“ 1 chiáº¿c "CV" Ä‘ang Ä‘Æ°á»£c Anh viáº¿t cáº©n tháº­n, vá»›i sá»± nghiÃªm tÃºc Ä‘á»ƒ dÃ nh Ä‘Æ°á»£c sá»± "Æ°u tiÃªn" tá»« Em.</p><p style="color: #FF69B4; font-weight: bold;">â€” From ë‚¨ with... ğŸ’•</p> `; // CONFETTI FUNCTION (Giá»¯ nguyÃªn) function launchConfetti(originX, originY) { const confettiCount = 80; const colors = ['#FF69B4', '#FFC0CB', '#FF4D4D', '#FFFFAA']; const container = document.body; for (let i = 0; i < confettiCount; i++) { const confetti = document.createElement('div'); confetti.classList.add('confetti', 'heart'); const color = colors[Math.floor(Math.random() * colors.length)]; confetti.style.backgroundColor = color; confetti.style.left = `${originX}px`; confetti.style.top = `${originY}px`; confetti.style.opacity = 1; const angle = Math.random() * Math.PI * 2; const distance = Math.random() * 350 + 150; const rotation = Math.random() * 1080 * 2; const x = Math.cos(angle) * distance; const y = Math.sin(angle) * distance + 150; const duration = Math.random() * 1.5 + 1; confetti.style.setProperty('--x', `${x}px`); confetti.style.setProperty('--y', `${y}px`); confetti.style.setProperty('--r', `${rotation}deg`); confetti.style.animation = `fall ${duration}s ease-out forwards`; container.appendChild(confetti); setTimeout(() => { confetti.remove(); }, duration * 1000); } } // HÃ€M checkAndSetContent ÄÃƒ ÄÆ¯á»¢C Sá»¬A Lá»–I HIá»‚N THá»Š STATUS function checkAndSetContent() { letterContent.innerHTML = firstTimeContent; applyTypewriterEffect(letterContent, 1000); // Cáº­p nháº­t vÃ  hiá»ƒn thá»‹ ngay láº­p tá»©c thÃ´ng bÃ¡o tráº¡ng thÃ¡i statusMessage.textContent = "Vá»›i Anh Ä‘iá»u tuyá»‡t vá»i lÃ  Ä‘Æ°á»£c lÃ m Em Háº¡nh PhÃºc ğŸ’"; statusMessage.style.color = '#FF69B4'; statusMessage.style.animation = 'none'; statusMessage.style.bottom = '20px'; statusMessage.style.opacity = '1'; } function showHeart() { heartWrapper.classList.add('active'); heartWrapper.classList.remove('invisible', 'hidden'); envelopeWrapper.classList.remove('visible', 'active'); statusMessage.style.bottom = '10px'; statusMessage.textContent = "Cháº¡m vÃ o trÃ¡i tim Ä‘á»ƒ báº¯t Ä‘áº§u..."; } function showEnvelope() { const rect = initialHeart.getBoundingClientRect(); launchConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2); heartWrapper.classList.remove('active'); envelopeWrapper.classList.add('visible', 'active'); heartWrapper.classList.add('hidden'); statusMessage.textContent = "áº¤n vÃ o bÃ¬ thÆ° Ä‘á»ƒ má»Ÿ ra nhÃ©!"; statusMessage.style.bottom = '20px'; envelopeWrapper.addEventListener('click', openEnvelope, { once: true }); setTimeout(() => { heartWrapper.classList.add('invisible'); }, heartTransitionDuration); // PHÃT NHáº C Ná»€N KHI NGÆ¯á»œI DÃ™NG TÆ¯Æ NG TÃC Láº¦N Äáº¦U if (isMuted) { bgm.muted = false; bgm.play().catch(error => console.error("Lá»—i phÃ¡t nháº¡c ná»n sau tÆ°Æ¡ng tÃ¡c TrÃ¡i tim:", error)); isMuted = false; bgmUserInitiated = true; soundToggle.textContent = 'ğŸ”Š'; } } function openEnvelope() { envelopeWrapper.classList.remove('active'); envelopeWrapper.classList.add('open'); statusMessage.style.opacity = '0'; // áº¨n Status Message trÆ°á»›c khi má»Ÿ playSound(envelopeOpenSound, 0.7); const rect = envelopeWrapper.getBoundingClientRect(); // 1. GÃ¡n vá»‹ trÃ­ thiá»‡p báº±ng vá»‹ trÃ­ phong bÃ¬ (báº¯t Ä‘áº§u chuyá»ƒn Ä‘á»™ng) letter.style.position = 'fixed'; letter.style.top = `${rect.top}px`; letter.style.left = `${rect.left}px`; letter.style.width = `${rect.width}px`; letter.style.height = `${rect.height}px`; letter.style.opacity = '1'; document.body.appendChild(letter); // 2. áº¨n bÃ¬ thÆ° vÃ  báº¯t Ä‘áº§u chuyá»ƒn Ä‘á»•i (thiá»‡p bung ra) setTimeout(() => { envelopeWrapper.classList.add('hidden'); requestAnimationFrame(() => { letter.style.top = ''; letter.style.left = ''; letter.style.width = ''; letter.style.height = ''; letter.classList.add('opened'); // KÃ­ch hoáº¡t 3D Pop-Bounce Giai Ä‘oáº¡n 1 setTimeout(() => { letter.classList.add('final-scale'); // KÃ­ch hoáº¡t 3D Pop-Bounce Giai Ä‘oáº¡n 2 const letterRect = letter.getBoundingClientRect(); launchConfetti(letterRect.left + letterRect.width / 2, letterRect.top + letterRect.height / 2); // Gá»i hÃ m Ä‘á»ƒ gÃ¡n ná»™i dung vÃ  hiá»ƒn thá»‹ status message setTimeout(checkAndSetContent, 500); }, 1200); // KÃ­ch hoáº¡t Giai Ä‘oáº¡n 2 vÃ  Confetti sau khi Giai Ä‘oáº¡n 1 gáº§n xong }); }, flapDuration + 100); } // --- 6. Logic BÃ­ NgÃ´ (Pumpkin) vÃ  Modal --- const pumpkin = document.getElementById('pumpkin'); const scareModal = document.getElementById('scareModal'); function showScaryModal() { scareModal.classList.add('active'); playSound(scarySound, 0.8); } function hideScaryModal() { scareModal.classList.remove('active'); } pumpkin.addEventListener('click', showScaryModal); // --- KHá»I Táº O CUá»I CÃ™NG --- function initializeApp() { heartWrapper.classList.add('invisible'); heartWrapper.addEventListener('click', showEnvelope, { once: true }); updatePinDisplay(); } initializeApp(); </script></body></html>
